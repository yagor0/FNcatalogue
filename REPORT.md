# گزارش پروژه: کاتالوگ الکترونیک فروشگاه آنلاین

## ۱. هدف و شرح پروژه

هدف، طراحی و پیاده‌سازی یک **کاتالوگ الکترونیک** تحت وب به‌عنوان هستهٔ یک فروشگاه آنلاین است. این کاتالوگ شامل مدیریت و نمایش محصولات، دسته‌بندی، جستجو و فیلتر، علاقه‌مندی، تاریخچهٔ مشاهده و پنل مدیریت است.

---

## ۲. معماری و طراحی سیستم

### معماری کلی

- **Frontend (کلاینت):** اپلیکیشن تک‌صفحه‌ای (SPA) با **React** و **Vite**
- **Backend (سرور):** **Node.js** و **Express** به‌عنوان REST API
- **پایگاه داده:** **SQLite** با کتابخانهٔ `better-sqlite3` برای ذخیرهٔ محصولات، دسته‌بندی‌ها، علاقه‌مندی، تاریخچهٔ مشاهده و نظرات

ارتباط بین فرانت و بک‌اند از طریق درخواست‌های HTTP (GET/POST/PUT/DELETE) و با استفاده از پروکسی Vite به آدرس `http://localhost:3001` انجام می‌شود.

### لایه‌های Backend

1. **API Routes:** مسیرهای `/api/products`, `/api/categories`, `/api/wishlist`, `/api/history`, `/api/recommended`, `/api/admin/*`
2. **منطق کسب‌وکار:** فیلتر، مرتب‌سازی، ثبت مشاهده، افزایش محبوبیت
3. **دسترسی به داده:** مستقیم با SQL روی فایل SQLite

### لایه‌های Frontend

1. **صفحات (Pages):** Home (کاتالوگ)، ProductDetail، Wishlist، History، AdminLogin، AdminDashboard
2. **کامپوننت‌ها:** ProductCard (کارت محصول با دکمهٔ علاقه‌مندی)
3. **ماژول API:** توابع `getProducts`, `getProduct`, `addToWishlist`, و غیره در `api.js` برای ارتباط با Backend
4. **شناسایی کاربر/سشن:** با `session_id` در `localStorage` برای نگهداری علاقه‌مندی و تاریخچه بدون نیاز به ثبت‌نام

---

## ۳. انتخاب زبان و ابزارها و دلیل انتخاب

| بخش | فناوری | دلیل انتخاب |
|-----|--------|-------------|
| Frontend | React + Vite | سرعت توسعه، کامپوننت‌محور، اکوسیستم غنی، Vite برای بیلد و dev سریع |
| Backend | Node.js + Express | یک زبان (JavaScript) در کل stack، سبک و مناسب برای APIهای REST |
| پایگاه داده | SQLite | بدون نیاز به نصب سرور جدا، فایل‌محور، کافی برای پروژهٔ درسی و دمو |
| استایل | CSS خام (متغیرها، Flexbox/Grid) | بدون وابستگی به فریمورک UI، کنترل کامل و سبک |
| فونت | Vazirmatn (Google Fonts) | خوانایی خوب برای متن فارسی و راست‌به‌چپ |

---

## ۴. نحوهٔ پیاده‌سازی ویژگی‌ها

### ۴.۱ نمایش محصولات

- محصولات از API با پارامترهای جستجو، فیلتر و مرتب‌سازی گرفته می‌شوند.
- هر محصول شامل: نام، تصویر، توضیحات، قیمت، دسته، موجودی و ویژگی‌های اضافی (مثل رنگ، سایز، برند) است.
- در فرانت، کارت محصول (`ProductCard`) برای هر آیتم رندر می‌شود و لینک به صفحهٔ جزئیات دارد.

### ۴.۲ مدیریت محصولات (نقش مدیر)

- ورود با نام کاربری و رمز عبور ساده (برای دمو: admin / admin123).
- پس از ورود، توکن در `localStorage` ذخیره و در هدر درخواست‌ها ارسال می‌شود.
- در پنل مدیریت: لیست محصولات، افزودن محصول جدید (با امکان آپلود تصویر)، ویرایش (قیمت، موجودی، نام، توضیحات، دسته، برند، ویژگی‌ها)، حذف محصول.

### ۴.۳ جستجو و فیلتر پیشرفته

- **جستجوی متنی:** پارامتر `q` در API بر اساس نام و توضیحات محصول فیلتر می‌کند.
- **فیلتر ترکیبی:** دسته (`category`)، برند (`brand`)، محدودهٔ قیمت (`minPrice`, `maxPrice`) به‌صورت همزمان پشتیبانی می‌شوند.
- در فرانت، فرم جستجو و فیلترهای سایدبار با همین پارامترها به API متصل هستند.

### ۴.۴ ویژگی‌های تعاملی

- **علاقه‌مندی (Wishlist):** با `session_id` در backend ذخیره می‌شود؛ افزودن/حذف از صفحهٔ لیست محصولات و صفحهٔ جزئیات.
- **تاریخچهٔ مشاهده:** با هر بازدید از صفحهٔ جزئیات محصول، یک رکورد در `view_history` با همان `session_id` ثبت می‌شود و در صفحهٔ «تاریخچه مشاهده» نمایش داده می‌شود.
- **محصولات پیشنهادی:** بر اساس فیلد `popularity` (که با هر بار مشاهدهٔ جزئیات محصول افزایش می‌یابد) از API گرفته و در صفحهٔ اصلی و زیر جزئیات محصول نمایش داده می‌شوند.

### ۴.۵ سیستم دسته‌بندی

- جدول `categories` با فیلد `parent_id` برای سلسله‌مراتب (مثلاً لباس → مردانه → پیراهن).
- API با پارامتر `tree=1` درخواست درخت دسته‌بندی می‌کند و در سایدبار به‌صورت درختی نمایش داده می‌شود.
- فیلتر محصولات بر اساس دسته (و در صورت نیاز زیردسته) در کوئری محصولات اعمال می‌شود.

### ۴.۶ نمایش اطلاعات کامل محصول

- صفحهٔ جداگانه برای هر محصول با آدرس `/product/:id`.
- شامل: تصویر، نام، برند، دسته، قیمت، موجودی، ویژگی‌ها (attributes)، توضیحات و بخش نظرات مشتریان.
- امکان ثبت نظر (نام، امتیاز، متن نظر) و نمایش نظرات قبلی.

---

## ۵. قابلیت‌های اختیاری اجرا شده

- **نظرات مشتریان** برای هر محصول (ثبت و نمایش).
- **آپلود تصویر** برای محصولات در پنل مدیر (با Multer و ذخیره در `frontend/public/uploads`).
- **طراحی واکنش‌گرا** با گرید و سایدبار تاشو برای موبایل.
- **پشتیبانی RTL و فونت فارسی** در کل رابط کاربری.

---

## ۶. اسکرین‌شات از بخش‌های مختلف برنامه

پس از اجرای پروژه، می‌توانید از بخش‌های زیر اسکرین‌شات تهیه کنید:

1. **صفحهٔ اصلی (کاتالوگ):** لیست محصولات، سایدبار دسته‌بندی و فیلتر، جستجو، مرتب‌سازی، بلوک محصولات پیشنهادی.
2. **صفحهٔ جزئیات محصول:** تصویر، قیمت، موجودی، دکمهٔ علاقه‌مندی، توضیحات، نظرات.
3. **لیست علاقه‌مندی:** محصولات ذخیره‌شده با session فعلی.
4. **تاریخچهٔ مشاهده:** آخرین محصولات بازدیدشده.
5. **پنل مدیریت:** ورود، لیست محصولات، فرم افزودن/ویرایش محصول.

---

## ۷. نحوهٔ اجرای پروژه

- در پوشهٔ `backend`: `npm install` → `npm run init-db` → `npm start`
- در پوشهٔ `frontend`: `npm install` → `npm run dev`
- مرورگر: `http://localhost:5173`

---

*پروژهٔ برنامه‌نویسی — کاتالوگ الکترونیک — پیاده‌سازی تحت وب*
